:root{
  --paper:#f6f1e4;
  --ink:#2a2a2a;
  --rainbow: linear-gradient(90deg,#ff6b6b 0%,#ffb86b 18%,#ffd166 32%,#b6e36e 46%,#7bd0b2 60%,#76a9fa 76%,#b388ff 100%);
  --accent:#2f7d32;
  --frame:#fffdf7;
}

*{box-sizing:border-box}
html,body{height:100%}
body.paper{
  margin:0; color:var(--ink);
  background: var(--paper);
  font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* subtle paper noise */
body.paper::before{
  content:"";
  position:fixed; inset:0; pointer-events:none;
  background-image:
    radial-gradient(rgba(0,0,0,.03) 1px, transparent 1px),
    radial-gradient(rgba(0,0,0,.02) 1px, transparent 1px);
  background-position: 0 0, 12px 8px;
  background-size: 16px 16px, 16px 16px;
  mix-blend-mode:multiply;
  opacity:.5;
}

/* top bar */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:.6rem 1rem;
  background:#fff9;
  border:4px solid var(--ink);
  border-radius:18px;
  margin:10px;
  box-shadow: 0 6px 0 rgba(0,0,0,.1);
  backdrop-filter: blur(2px);
}
.brand{display:flex;gap:.6rem;align-items:center}
.brand .leaf{font-size:1.4rem}
.brand-text{font-family:'Fredoka', system-ui; font-weight:700; letter-spacing:.2px}

.controls{display:flex; gap:.5rem; align-items:center}
.controls button{
  background:#fff; color:var(--ink);
  border:3px solid var(--ink);
  padding:.35rem .6rem; border-radius:12px; cursor:pointer;
  font-weight:600; box-shadow: 0 3px 0 rgba(0,0,0,.15);
}
.controls button:hover{transform:translateY(-1px)}
#clock{font-variant-numeric:tabular-nums; padding-left:.4rem; opacity:.9; font-weight:700}

/* progress */
.progress-wrap{height:8px; background:rgba(0,0,0,.08); margin:0 10px; border-radius:8px; border:1px solid rgba(0,0,0,.15)}
.progress-bar{height:8px; width:0%; background:var(--rainbow); border-radius:8px; transition:width .25s ease}

/* deck */
#deck{height:calc(100vh - 120px); padding:14px; outline:none}
.slide{display:none; height:100%; overflow:auto; padding:10px}
.slide.current{display:block; animation:fade .5s ease}
.inner{max-width:1100px; margin:0 auto; padding:1.1rem}

/* poster frame */
.poster-frame{
  background:var(--frame);
  border:6px solid var(--ink);
  border-radius:26px;
  box-shadow: 0 10px 0 rgba(0,0,0,.08);
}
.inner.poster-frame{position:relative}
.inner.poster-frame::after{
  content:"";
  position:absolute; inset:10px;
  border:2px solid rgba(0,0,0,.25);
  border-radius:20px; pointer-events:none;
}

/* title card */
.titlecard h1{
  font-family:'Fredoka', system-ui; font-weight:700; font-size:2.6rem; line-height:1.05; margin:.2rem 0 .25rem;
}
.titlecard h1::after{
  content:""; display:block; height:10px; margin-top:6px; border-radius:6px; background:var(--rainbow);
}
.subtitle{font-family:'Kalam', cursive; font-weight:700; font-size:1.6rem; margin:.2rem 0 .2rem}
.byline{opacity:.85; margin:0 0 .6rem 0}

.two-up{display:grid; grid-template-columns:1fr 1fr; gap:1rem; align-items:start}
img{max-width:100%; height:auto; border-radius:18px; background:#fff; border:4px solid var(--ink); box-shadow: 0 6px 0 rgba(0,0,0,.12)}
.sticker{transform:rotate(-0.8deg)}
.hero img{max-height:50vh; object-fit:cover}
figcaption{font-size:.9rem; color:#555; margin-top:.35rem}

/* headings + bullets */
h2{font-family:'Kalam', cursive; font-weight:700; font-size:1.9rem; margin:.1rem 0 .6rem; color:#2b2b2b}
.bullets{list-style:none; padding:0; margin:0 0 1rem 0; font-size:1.05rem}
.bullets li{margin:.45rem 0; padding-left:.2rem}
.bullets li::before{content:"üçÅ "; margin-right:.3rem}

.tag{
  padding:.08rem .4rem; border:2px solid var(--ink); border-radius:999px;
  background:#fff; font-weight:700; box-shadow: 0 2px 0 rgba(0,0,0,.12);
}

/* ‚ÄúMore‚Äù expanders */
.more{margin-top:.5rem}
.more summary{cursor:pointer; font-weight:700}

/* Glossary buttons + modal */
.def{border:2px solid var(--ink); background:#fff; border-radius:10px; padding:.1rem .35rem; cursor:pointer}
dialog#glossary{border:none; padding:0; background:transparent}
.glossary-wrap{max-width:720px; margin:auto; padding:1rem; background:var(--frame)}
.glossary-wrap .close{float:right; border:3px solid var(--ink); background:#fff; border-radius:10px; padding:.2rem .4rem; cursor:pointer}
.glossary-wrap h3{font-family:'Fredoka'; margin:.3rem 0 .5rem}
.glossary-wrap dl{display:grid; grid-template-columns:1fr 2fr; gap:.4rem .8rem}
.glossary-wrap dt{font-family:'Kalam'; font-weight:700}

/* SIM styles */
.sim{margin-top:.5rem}
.sim label{display:block; font-weight:700; margin-bottom:.25rem}
.sim input[type=range]{width:100%}
.readout{display:flex; gap:1rem; margin:.35rem 0 .6rem 0; font-weight:700}
.plantbar{position:relative; height:16px; border:3px solid var(--ink); border-radius:999px; background:#fff}
.arrow{position:absolute; top:-8px; left:50%; width:0; height:0; border-left:10px solid transparent; border-right:10px solid transparent; border-top:14px solid #2f7d32; transition:left .2s ease}

/* Quiz */
.quiz{margin:1rem 0; padding:.6rem; border:3px dashed rgba(0,0,0,.3); border-radius:14px; background:#fff}
.quiz .opt{display:block; width:100%; text-align:left; margin:.25rem 0; padding:.45rem .6rem; border:2px solid var(--ink); border-radius:12px; background:#fff; cursor:pointer}
.quiz .opt.correct{background:#b6e36e}
.quiz .opt.wrong{background:#ffd166}
.quiz .feedback{min-height:1.2em; margin-top:.25rem; font-weight:700}

/* Refs */
.refs .ref-list{max-height:62vh; overflow:auto; padding-right:.5rem}
.refs p{font-size:.95rem; line-height:1.35; margin:.45rem 0}

/* footer */
.help{
  position:fixed; left:0; right:0; bottom:0;
  padding:.35rem .8rem; background:#fff; font-size:.9rem; text-align:center;
  border-top:3px solid var(--ink)
}

@keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
